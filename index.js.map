{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"51385266-59a206174458b904205f7b7fa\";\n\nexport async function getImagesByQuery(query, page = 1) {\n  try {\n    const response = await axios('https://pixabay.com/api/', {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 6,\n        page,\n      }\n    });\n      console.log(response.data);\n    return response.data.hits;\n  } catch (error) {\n    console.log(error.message);\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox = null;\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst btnLoadMore = document.querySelector(\".btn-load-more\");\n\nexport function createMarkup(arr) {\n  return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `\n      <div class=\"wrap\">\n        <a class=\"gallery-item\" href=\"${largeImageURL}\">\n          <img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360px\">\n        </a>\n        <ul class=\"list\">\n          <li class=\"list-item\"><p class=\"label\">Likes</p><p class=\"value\">${likes}</p></li>\n          <li class=\"list-item\"><p class=\"label\">Views</p><p class=\"value\">${views}</p></li>\n          <li class=\"list-item\"><p class=\"label\">Comments</p><p class=\"value\">${comments}</p></li>\n          <li class=\"list-item\"><p class=\"label\">Downloads</p><p class=\"value\">${downloads}</p></li>\n        </ul>\n      </div>\n    `;\n  }).join(\"\");\n}\n\nexport function renderGallery(images, append = false) {\n  const markup = createMarkup(images);\n  if (append) {\n    gallery.insertAdjacentHTML('beforeend', markup);\n  } else {\n    gallery.innerHTML = markup;\n  }\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n  loader.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n  btnLoadMore.classList.remove(\"hidden\");\n  \n}\n\nexport function hideLoadMoreButton() {\n  btnLoadMore.classList.add(\"hidden\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  renderGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton\n} from './js/render-functions';\n\nconst form = document.querySelector(\".form\");\nconst loadMoreBtn = document.querySelector(\".btn-load-more\");\n\nform.addEventListener(\"submit\", handleSubmit);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\n\nlet page = 1;\nlet userInput = '';\n\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  userInput = event.target.elements[\"search-text\"].value.trim();\n  page = 1;\n  \n\n  if (userInput === \"\") {\n    iziToast.warning({\n      message: 'Unfortunately you cannot leave the input blank',\n      position: 'topRight',\n      messageColor: '#fff',\n      titleColor: '#fff',\n      color: '#ef4040',\n      iconUrl: './img/bi_x-octagon-2.svg',\n      maxWidth: 432\n    });\n    return;\n  }\n\n  clearGallery();\n  showLoader();\n\n  try {\n    const res = await getImagesByQuery(userInput);\n\n    if (!res || res.length === 0) {\n      iziToast.show({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        messageColor: '#fff',\n        titleColor: '#fff',\n        color: '#ef4040',\n        iconUrl: './img/bi_x-octagon-2.svg',\n        maxWidth: 432\n      });\n      return;\n    }\n\n    renderGallery(res);\n    showLoadMoreButton();\n    form.reset();\n  } catch (error) {\n    iziToast.show({\n      message: 'Sorry, something went wrong. Please try again!',\n      position: 'topRight',\n      messageColor: '#fff',\n      titleColor: '#fff',\n      color: '#ef4040',\n      iconUrl: './img/bi_x-octagon-2.svg',\n      maxWidth: 432\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function onLoadMore() {\n  page++\n  \n  \n  try {\n    const data = await getImagesByQuery(userInput, page);\n    renderGallery(data, true);\n    \n  } catch (error) {\n    alert(error.message)\n  }\n}"],"names":["API_KEY","getImagesByQuery","query","page","response","axios","error","lightbox","gallery","loader","btnLoadMore","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderGallery","images","append","markup","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","form","loadMoreBtn","handleSubmit","onLoadMore","userInput","event","iziToast","res","data"],"mappings":"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"}